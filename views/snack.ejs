<%- include('partials/header.ejs') %>
<main class="content-card">
    <h2><%= snack.name %></h2>
    <p class="description"><%= snack.description %></p>
    
    <div class="price-info">
        <p>Actual Price: <span class="price-value">$<%= snack.price.toFixed(2) %></span></p>
    </div>
    
    <form method="POST" action="/order" class="purchase-form">
        <input type="hidden" name="snackId" value="<%= snack.id %>">
        
        <!-- VULNERABILITY: Client-Controlled Price. The server trusts this value. -->
        <!-- Attacker can change this 'hidden' input value via browser dev tools. -->
        <input type="hidden" name="price" value="<%= snack.price.toFixed(2) %>" id="snack-price-input">
        
        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity" name="quantity" value="1" min="1" required class="input-field">
        
        <button type="submit" class="button primary-button">Buy Now</button>
        <p class="small-text">The total price is calculated based on the price sent in this form.</p>
    </form>
</main>
<%- include('partials/footer.ejs') %>